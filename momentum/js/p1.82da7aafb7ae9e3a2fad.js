(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Summer wind",src:"assets/sounds/Summer Wind.mp3",duration:"01:50"},{title:"Ennio Morricone",src:"assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],t=document.querySelector(".time"),n=document.querySelector(".date"),o=document.querySelector(".greeting"),c=document.querySelector(".name");function s(e){let t="";return e>=6&&e<=11?t="morning":e>=12&&e<=17?t="afternoon":e>=18&&e<=23?t="evening":e>=0&&e<=5&&(t="night"),t}!function e(){const c=new Date,a=c.toLocaleTimeString(),d=c.toLocaleDateString("en-RU",{weekday:"long",day:"numeric",month:"long"}),r=c.getHours();t.innerHTML=a,n.innerHTML=d;const i=s(r);o.textContent=`Good ${i},`,setTimeout(e,1e3)}(),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",c.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(c.value=localStorage.getItem("name"))}));const a=document.body;function d(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}!function(){const e=s((new Date).getHours());let t=d(1,20);t<10&&(t=t.toString().padStart(2,"0"));const n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{a.style.backgroundImage=`url(${n.src})`}}();const r=document.querySelector(".slide-prev"),i=document.querySelector(".slide-next");let l=d(1,20);r.addEventListener("click",(function(){"01"===l?(l=20,l<10&&(l=l.toString().padStart(2,"0"))):(l--,l<10&&(l=l.toString().padStart(2,"0")));const e=s((new Date).getHours()),t=new Image;t.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${l}.jpg`,t.onload=()=>{a.style.backgroundImage=`url(${t.src})`}})),i.addEventListener("click",(function(){20===l?(l=1,l<10&&(l=l.toString().padStart(2,"0"))):(l++,l<10&&(l=l.toString().padStart(2,"0")));const e=s((new Date).getHours()),t=new Image;t.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${l}.jpg`,t.onload=()=>{a.style.backgroundImage=`url(${t.src})`}}));const u=document.querySelector(".weather-icon"),m=document.querySelector(".temperature"),g=document.querySelector(".weather-description"),h=document.querySelector(".wind"),L=document.querySelector(".humidity"),y=document.querySelector(".city"),S=document.querySelector(".weather-error");async function p(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${y.value}&lang=en&appid=312e98855179b96f83c2485644c00a6d&units=metric`,t=await fetch(e),n=await t.json();"404"===n.cod?(S.textContent="Sorry, city not found",u.innerHTML='<i class="owf owf-950"></i>'):(u.className="weather-icon owf",u.classList.add(`owf-${n.weather[0].id}`),m.textContent=Math.round(`${n.main.temp}`)+" Â°C",g.textContent=n.weather[0].description,h.textContent=Math.round(`${n.wind.speed}`)+" m/s",L.textContent=Math.round(`${n.main.humidity}`)+" %")}window.addEventListener("beforeunload",(function(){localStorage.setItem("city",y.value)})),y.addEventListener("change",(function(){p(),y.blur()})),document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("city")&&(y.value=localStorage.getItem("city"))})),document.addEventListener("DOMContentLoaded",p);const v=document.querySelector(".quote"),f=document.querySelector(".author"),w=document.querySelector(".change-quote");async function q(){const e=await fetch("quotes.json"),t=await e.json();console.log(t);const n=d(0,t.length);v.textContent=`${t[n].text}`,f.textContent=`${t[n].author}`}document.addEventListener("DOMContentLoaded",q),w.addEventListener("click",q);const E=document.querySelector("audio"),k=document.querySelector(".play"),I=document.querySelector(".play-prev"),C=document.querySelector(".play-next"),M=document.querySelector(".play-list");for(let t=0;t<e.length;t++){const n=document.createElement("li");n.textContent=e[t].title,n.classList.add("play-item"),M.append(n)}const $=document.querySelectorAll(".play-item");$[0].classList.add("item-active");let b=!1,x=0;const D=e=>{for(let e of $)e.classList.remove("item-active");$[e].classList.add("item-active")};function O(){b?(E.play(),b=!0,k.classList.add("pause")):(E.pause(),b=!1)}function H(){x===e.length-1?(x=0,E.pause(),E.src=e[x].src,D(x),O()):(x++,E.pause(),E.src=e[x].src,D(x),O())}k.addEventListener("click",(function(){b?(E.pause(),b=!1):(E.src=e[x].src,E.play(),b=!0)})),k.addEventListener("click",(function(){k.classList.toggle("pause")})),C.addEventListener("click",H),I.addEventListener("click",(function(){0===x?(x=e.length-1,E.pause(),E.src=e[x].src,D(x),O()):(x--,E.pause(),E.src=e[x].src,D(x),O())})),b||($[x].classList.add("item-active"),E.addEventListener("ended",H));const j=document.querySelector(".set-icon"),B=document.querySelector(".set-box");j.addEventListener("click",(function(){B.classList.toggle("active"),j.classList.toggle("active")}));const T=document.getElementById("greeting-el"),A=document.querySelector(".greeting-container"),R=document.getElementById("player-el"),F=document.querySelector(".player"),N=document.getElementById("weather-el"),Y=document.querySelector(".weather"),G=document.getElementById("quotes-el"),J=document.querySelector(".quotes"),U=document.querySelectorAll(".toggle-button");function W(){T.checked?A.classList.add("hidden"):A.classList.contains("hidden")&&A.classList.remove("hidden")}function z(){R.checked?F.classList.add("hidden"):F.classList.contains("hidden")&&F.classList.remove("hidden")}function K(){N.checked?Y.classList.add("hidden"):Y.classList.contains("hidden")&&Y.classList.remove("hidden")}function P(){G.checked?J.classList.add("hidden"):J.classList.contains("hidden")&&J.classList.remove("hidden")}window.addEventListener("beforeunload",(function(){U.forEach((e=>{localStorage.setItem(e.id,e.checked),console.log(e.id,e.checked)}))})),T.addEventListener("change",W),R.addEventListener("change",z),N.addEventListener("change",K),G.addEventListener("change",P),document.addEventListener("DOMContentLoaded",(function(){U.forEach((e=>{let t=JSON.parse(localStorage.getItem(e.id));document.getElementById(e.id).checked=t}))})),document.addEventListener("DOMContentLoaded",W),document.addEventListener("DOMContentLoaded",z),document.addEventListener("DOMContentLoaded",K),document.addEventListener("DOMContentLoaded",P)})();
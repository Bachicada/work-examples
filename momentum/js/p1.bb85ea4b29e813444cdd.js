(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"assets/sounds/River Flows In You.mp3",duration:"03:50"},{title:"Summer wind",src:"assets/sounds/Summer Wind.mp3",duration:"01:50"},{title:"Ennio Morricone",src:"assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],t=document.querySelector(".time"),n=document.querySelector(".date"),o=document.querySelector(".greeting"),a=document.querySelector(".name");function s(e){let t="";return e>=6&&e<=11?t="morning":e>=12&&e<=17?t="afternoon":e>=18&&e<=23?t="evening":e>=0&&e<=5&&(t="night"),t}!function e(){const a=new Date,r=a.toLocaleTimeString(),c=a.toLocaleDateString("en-RU",{weekday:"long",day:"numeric",month:"long"}),i=a.getHours();t.innerHTML=r,n.innerHTML=c;const d=s(i);o.textContent=`Good ${d},`,setTimeout(e,1e3)}(),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",a.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(a.value=localStorage.getItem("name"))}));const r=document.body;function c(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}!function(){const e=s((new Date).getHours());let t=c(1,20);t<10&&(t=t.toString().padStart(2,"0"));const n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{r.style.backgroundImage=`url(${n.src})`}}();const i=document.querySelector(".slide-prev"),d=document.querySelector(".slide-next");let u=c(1,20);i.addEventListener("click",(function(){1===u?(u=20,u<10&&(u=u.toString().padStart(2,"0"))):(u--,u<10&&(u=u.toString().padStart(2,"0")));const e=s((new Date).getHours()),t=new Image;t.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${u}.jpg`,t.onload=()=>{r.style.backgroundImage=`url(${t.src})`}})),d.addEventListener("click",(function(){20===u?(u=1,u<10&&(u=u.toString().padStart(2,"0"))):(u++,u<10&&(u=u.toString().padStart(2,"0")));const e=s((new Date).getHours()),t=new Image;t.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${u}.jpg`,t.onload=()=>{r.style.backgroundImage=`url(${t.src})`}}));const l=document.querySelector(".weather-icon"),m=document.querySelector(".temperature"),g=document.querySelector(".weather-description"),p=document.querySelector(".wind"),y=document.querySelector(".humidity"),S=document.querySelector(".city");async function w(){const e=`https://api.openweathermap.org/data/2.5/weather?q=${S.value}&lang=en&appid=312e98855179b96f83c2485644c00a6d&units=metric`,t=await fetch(e),n=await t.json();l.className="weather-icon owf",l.classList.add(`owf-${n.weather[0].id}`),m.textContent=Math.round(`${n.main.temp}`)+" Â°C",g.textContent=n.weather[0].description,p.textContent=Math.round(`${n.wind.speed}`)+" m/s",y.textContent=Math.round(`${n.main.humidity}`)+" %"}document.querySelector(".weather-error"),document.addEventListener("DOMContentLoaded",w),S.addEventListener("change",(function(){w(),S.blur()})),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",S.value)})),window.addEventListener("load",(function(){localStorage.getItem("city")&&(S.value=localStorage.getItem("city"))}));const h=document.querySelector("audio"),f=document.querySelector(".play"),v=document.querySelector(".play-prev"),L=document.querySelector(".play-next"),q=document.querySelector(".play-list");for(let t=0;t<e.length;t++){const n=document.createElement("li");n.textContent=e[t].title,n.classList.add("play-item"),q.append(n)}const E=document.querySelectorAll(".play-item");E[0].classList.add("item-active");let $=!1,I=0;const k=e=>{for(let e of E)e.classList.remove("item-active");E[e].classList.add("item-active")};function M(){$?(h.play(),$=!0,f.classList.add("pause")):(h.pause(),$=!1)}function b(){I===e.length-1?(I=0,h.pause(),h.src=e[I].src,k(I),M()):(I++,h.pause(),h.src=e[I].src,k(I),M())}f.addEventListener("click",(function(){$?(h.pause(),$=!1):(h.src=e[I].src,h.play(),$=!0)})),f.addEventListener("click",(function(){f.classList.toggle("pause")})),L.addEventListener("click",b),v.addEventListener("click",(function(){0===I?(I=e.length-1,h.pause(),h.src=e[I].src,k(I),M()):(I--,h.pause(),h.src=e[I].src,k(I),M())})),$||(E[I].classList.add("item-active"),h.addEventListener("ended",b))})();